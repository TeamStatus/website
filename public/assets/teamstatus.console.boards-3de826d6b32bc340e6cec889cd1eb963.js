angular.module("teamstatus.console.boards",["teamstatus.console.widget"]).factory("boards",function(){return angular.element(".boards").data("boards")}).controller("BoardsCtrl",["$scope","$http","$modal","boards","path",function(o,r,n,t,e){o.boards=t,o.confirmDelete=function(o){var t=n.open({templateUrl:e+"/partials/confirm_action_modal",controller:"ConfirmActionModalCtrl",resolve:{action:function(){return"Delete"},message:function(){return"You are going to delete the board. Are you sure?"}}});t.result.then(function(){r.delete(e+"/boards/"+o+".json").success(function(){window.location.reload()})},function(){})}}]).factory("board",function(){return angular.element(".board").data("board")}).controller("BoardCtrl",["$scope","$http","$window","$modal","path","board",function(o,r,n,t,e,a){o.editing=void 0!==a&&null!==a,o.board=a,o.saveBoard=function(){o.editing?r.put(e+"/boards/"+o.board._id+".json",{name:o.board.name}).success(function(o){o.error||(n.location.href=e+"/boards")}):r.post(e+"/boards.json",{name:o.board.name}).success(function(o){o.error||(n.location.href=e+"/boards")})},o.resetPublicId=function(n){var a=t.open({templateUrl:e+"/partials/confirm_action_modal",controller:"ConfirmActionModalCtrl",resolve:{action:function(){return"Reset"},message:function(){return"You are going to reset public url for the board. Clicking Reset will instantly change it and the previous url will stop working. Are you sure?"}}});a.result.then(function(){r.post(e+"/boards/"+n+"/public_id.json").success(function(r){o.board.publicId=r.publicId,o.board.public_url=r.public_url})},function(){})}}]);